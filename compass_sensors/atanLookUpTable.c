// INCLUDE
// ----------------------------------------------------------------------------

// PROTOTYPES
// ----------------------------------------------------------------------------
int inversetan(float x);
int binarySearchIndex(int start, int length, float value);
	
// GLOBALS
// ----------------------------------------------------------------------------
#define size 181

float ratios[] = {
  -1.633123935319537e+16,
  -57.289961630759144,
  -28.636253282915515,
  -19.08113668772816,
  -14.300666256711942,
  -11.43005230276132,
  -9.514364454222587,
  -8.144346427974593,
  -7.115369722384207,
  -6.313751514675041,
  -5.671281819617707,
  -5.144554015970307,
  -4.704630109478456,
  -4.331475874284153,
  -4.0107809335358455,
  -3.7320508075688776,
  -3.4874144438409087,
  -3.2708526184841404,
  -3.0776835371752527,
  -2.904210877675822,
  -2.7474774194546216,
  -2.6050890646938023,
  -2.4750868534162946,
  -2.355852365823753,
  -2.246036773904215,
  -2.1445069205095586,
  -2.050303841579296,
  -1.9626105055051504,
  -1.8807264653463318,
  -1.8040477552714236,
  -1.7320508075688767,
  -1.6642794823505174,
  -1.6003345290410507,
  -1.5398649638145827,
  -1.4825609685127403,
  -1.4281480067421144,
  -1.3763819204711734,
  -1.3270448216204098,
  -1.2799416321930785,
  -1.234897156535051,
  -1.19175359259421,
  -1.1503684072210092,
  -1.1106125148291928,
  -1.0723687100246826,
  -1.0355303137905694,
  -0.9999999999999999,
  -0.9656887748070739,
  -0.9325150861376618,
  -0.9004040442978399,
  -0.8692867378162266,
  -0.8390996311772799,
  -0.8097840331950072,
  -0.7812856265067174,
  -0.7535540501027942,
  -0.7265425280053608,
  -0.7002075382097097,
  -0.6745085168424265,
  -0.6494075931975104,
  -0.6248693519093275,
  -0.6008606190275604,
  -0.5773502691896257,
  -0.554309051452769,
  -0.5317094316614788,
  -0.5095254494944288,
  -0.4877325885658614,
  -0.4663076581549986,
  -0.4452286853085361,
  -0.4244748162096047,
  -0.4040262258351568,
  -0.3838640350354158,
  -0.36397023426620234,
  -0.34432761328966527,
  -0.3249196962329063,
  -0.30573068145866034,
  -0.2867453857588079,
  -0.2679491924311227,
  -0.24932800284318068,
  -0.2308681911255631,
  -0.2125565616700221,
  -0.19438030913771848,
  -0.17632698070846498,
  -0.15838444032453627,
  -0.14054083470239145,
  -0.1227845609029046,
  -0.10510423526567646,
  -0.08748866352592401,
  -0.06992681194351041,
  -0.052407779283041196,
  -0.03492076949174773,
  -0.017455064928217585,
  0.0,
  0.017455064928217585,
  0.03492076949174773,
  0.052407779283041196,
  0.06992681194351041,
  0.08748866352592401,
  0.10510423526567646,
  0.1227845609029046,
  0.14054083470239145,
  0.15838444032453627,
  0.17632698070846498,
  0.19438030913771848,
  0.2125565616700221,
  0.2308681911255631,
  0.24932800284318068,
  0.2679491924311227,
  0.2867453857588079,
  0.30573068145866034,
  0.3249196962329063,
  0.34432761328966527,
  0.36397023426620234,
  0.3838640350354158,
  0.4040262258351568,
  0.4244748162096047,
  0.4452286853085361,
  0.4663076581549986,
  0.4877325885658614,
  0.5095254494944288,
  0.5317094316614788,
  0.554309051452769,
  0.5773502691896257,
  0.6008606190275604,
  0.6248693519093275,
  0.6494075931975104,
  0.6745085168424265,
  0.7002075382097097,
  0.7265425280053608,
  0.7535540501027942,
  0.7812856265067174,
  0.8097840331950072,
  0.8390996311772799,
  0.8692867378162266,
  0.9004040442978399,
  0.9325150861376618,
  0.9656887748070739,
  0.9999999999999999,
  1.0355303137905694,
  1.0723687100246826,
  1.1106125148291928,
  1.1503684072210092,
  1.19175359259421,
  1.234897156535051,
  1.2799416321930785,
  1.3270448216204098,
  1.3763819204711734,
  1.4281480067421144,
  1.4825609685127403,
  1.5398649638145827,
  1.6003345290410507,
  1.6642794823505174,
  1.7320508075688767,
  1.8040477552714236,
  1.8807264653463318,
  1.9626105055051504,
  2.050303841579296,
  2.1445069205095586,
  2.246036773904215,
  2.355852365823753,
  2.4750868534162946,
  2.6050890646938023,
  2.7474774194546216,
  2.904210877675822,
  3.0776835371752527,
  3.2708526184841404,
  3.4874144438409087,
  3.7320508075688776,
  4.0107809335358455,
  4.331475874284153,
  4.704630109478456,
  5.144554015970307,
  5.671281819617707,
  6.313751514675041,
  7.115369722384207,
  8.144346427974593,
  9.514364454222587,
  11.43005230276132,
  14.300666256711942,
  19.08113668772816,
  28.636253282915515,
  57.289961630759144,
  1.633123935319537e+16
};

int degrees[] = {
  -90,
  -89,
  -88,
  -87,
  -86,
  -85,
  -84,
  -83,
  -82,
  -81,
  -80,
  -79,
  -78,
  -77,
  -76,
  -75,
  -74,
  -73,
  -72,
  -71,
  -70,
  -69,
  -68,
  -67,
  -66,
  -65,
  -64,
  -63,
  -62,
  -61,
  -60,
  -59,
  -58,
  -57,
  -56,
  -55,
  -54,
  -53,
  -52,
  -51,
  -50,
  -49,
  -48,
  -47,
  -46,
  -45,
  -44,
  -43,
  -42,
  -41,
  -40,
  -39,
  -38,
  -37,
  -36,
  -35,
  -34,
  -33,
  -32,
  -31,
  -30,
  -29,
  -28,
  -27,
  -26,
  -25,
  -24,
  -23,
  -22,
  -21,
  -20,
  -19,
  -18,
  -17,
  -16,
  -15,
  -14,
  -13,
  -12,
  -11,
  -10,
  -9,
  -8,
  -7,
  -6,
  -5,
  -4,
  -3,
  -2,
  -1,
  0,
  1,
  2,
  3,
  4,
  5,
  6,
  7,
  8,
  9,
  10,
  11,
  12,
  13,
  14,
  15,
  16,
  17,
  18,
  19,
  20,
  21,
  22,
  23,
  24,
  25,
  26,
  27,
  28,
  29,
  30,
  31,
  32,
  33,
  34,
  35,
  36,
  37,
  38,
  39,
  40,
  41,
  42,
  43,
  44,
  45,
  46,
  47,
  48,
  49,
  50,
  51,
  52,
  53,
  54,
  55,
  56,
  57,
  58,
  59,
  60,
  61,
  62,
  63,
  64,
  65,
  66,
  67,
  68,
  69,
  70,
  71,
  72,
  73,
  74,
  75,
  76,
  77,
  78,
  79,
  80,
  81,
  82,
  83,
  84,
  85,
  86,
  87,
  88,
  89,
  90
};


// FUNCTIONS
// ----------------------------------------------------------------------------

// searches through a lookup table for the inverse tan value of x in degrees
int inversetan(float x){
	int index = binarySearchIndex(0, size, x);
	return degrees[index];
}

// binary search for value in ratios and return index
int binarySearchIndex(int start, int length, float value){
	
	// base case
	if(length == 1)
		return start;
	
	int mid = start + (length / 2);
	
	if(value < ratios[mid])
		return binarySearchIndex(start, mid - start, value);
	else
		return binarySearchIndex(mid, start + length - mid, value);
	
}
